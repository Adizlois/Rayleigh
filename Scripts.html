<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
  
  <meta content="text/html; charset=ISO-8859-1">

  
  <link type="text/css" rel="stylesheet" href="stylesheet.css">
  <title>Test</title>

  
</head><body>
<div id="headertext">
<h1><small style="font-family: serif;">A PRACTICAL ATMOSPHERIC
CORRECTION METHOD FOR LANDSAT
TM/ETM+ DATA OVER INLAND WATERS</small><br>
</h1>
</div>

<div id="headerimages">
<img src="Imagenes/landsat7.jpg" height="180" width="220"><img src="Imagenes/binary.png" height="180" width="220"><img src="Imagenes/3dgis.jpeg" height="180" width="220"></div>

<br>

<div id="leftpannel">
<div id="button"><a class="linkbutton" href="index.html">1.Introduction</a>
</div>
<div id="button"><a class="linkbutton" href="Landsat.html"> 2.Landsat</a>
</div>
<div id="button"><a class="linkbutton" href="Area.html"> 3.Study area</a>
</div>
<div id="button"><a class="linkbutton" href="WLR.html"> 4.WLR retrieval</a>
</div>
<div id="button"><a class="linkbutton" href="LEDAPS.html"> 5.LEDAPS </a>
</div>
<div id="button"><a class="linkbutton" href="Scripts.html"> 6.Scripts</a>
</div>
<div id="button"><a class="linkbutton" href="Results.html"> 7.Results </a>
</div>
<div id="button"><a class="linkbutton" href="References.html">
8.References</a> </div>
</div>

<div id="maintext">
<h2>6. Scripts</h2>
<hr>
<br>
<p><span class="Firstletter">P</span>ython scripts have been developped in order to implement the proposed method.Computation has been structured in two different scripts in order to facilitate the usefulness  of each function  in future studies, independently of the results obtained with this specific method:<br>
One script (<a href="https://github.com/Adizlois/Rayleigh/blob/master/AtCorrUtils.py" style="text-decoration:none;"> AtCorrUtils.py</a>) containing separate functions for calculating most of the terms specified in section 4, as well as the aerosol contribution (working as an auxiliary library whereby the main script can import functions). And the main script (<a href="https://github.com/Adizlois/Rayleigh/blob/master/do_wang.py" style="text-decoration:none;">do_wang.py</a>) that encodes the specific application of the generic functions by calling them using locally defined variables.<br>
<br>
Software takes only 3 inputs to perform the calculation:<br>

    - Metadata filename: path and filename of the Landsat metadata file. Note that geotiff files must be located in the same folder as the metadata: <br>
 Ex.:"./LE71210402008289EDC00/LE71210402008289EDC00_MTL.txt"<br>
    - Height: height above sea level (km) of the study area.<br>
    - Region of Interest (ROI) (optional): Since the size of raw files from the USGS Landsat archive may be large enough to extend the computation process more than desired (about 55 Mb each band), we can optionally define a specific region of interest to narrow the calculation. Area must be set by using the UTMxy coordinates of   the northwestern and southeastern corners of our ROI:<br>
Ex:"--roi 404000.00,3260000.00,425000.00,3210000.00"<br>
<br>
</p>

<span style="color:#CD5C5C;">
"""<br>
SYNOPSIS - <b>do_wang.py</b><br><br>
do_wang.py [-h,--help] [-v,--verbose] [-i,--input] [-O,--o3] [-H,--height] [-r,--roi]
<br><br>DESCRIPTION
<br>This program receives a metadata file in USGS format, and it then applies
the Wang atmospheric correction method based on a minimimal set of input
parameters. It will take the original data, subset it if required using a
geographical box in projection units (UTM). It will produce datasets with
the TOA radiance (e.g. `LE72040312010347EDC00_ROI_B2_TOARAD.tif`), as well
as a datafile with the visible bands with atmospheric correction (filename
is e.g. `LE72040312010347EDC00_WANG_VIS_WLRAD.tif`).<br>
<br>EXAMPLES<br>
$ ./do_wang.py -H 0.5 -i data/LE72040312010347EDC00_MTL.txt --roi 578745.000,4650765.000,608535.000,4618935.000 -v<br>
Sat Jun 15 15:19:56 2013<br>
1 data/LE72040312010347EDC00_ROI_B1.vrt data/LE72040312010347EDC00_B1.TIF<br>
Input file size is 8081, 7151<br>
Computed -srcwin 3822 2685 993 1061 from projected window.<br>
2 data/LE72040312010347EDC00_ROI_B2.vrt data/LE72040312010347EDC00_B2.TIF<br>
Input file size is 8081, 7151<br>
Computed -srcwin 3822 2685 993 1061 from projected window.<br>
3 data/LE72040312010347EDC00_ROI_B3.vrt data/LE72040312010347EDC00_B3.TIF<br>
Input file size is 8081, 7151<br>
Computed -srcwin 3822 2685 993 1061 from projected window.<br>
4 data/LE72040312010347EDC00_ROI_B4.vrt data/LE72040312010347EDC00_B4.TIF<br>
Input file size is 8081, 7151<br>
Computed -srcwin 3822 2685 993 1061 from projected window.<br>
5 data/LE72040312010347EDC00_ROI_B5.vrt data/LE72040312010347EDC00_B5.TIF<br>
Input file size is 8081, 7151<br>
Computed -srcwin 3822 2685 993 1061 from projected window.<br>
7 data/LE72040312010347EDC00_ROI_B7.vrt data/LE72040312010347EDC00_B7.TIF<br>
Input file size is 8081, 7151<br>
Computed -srcwin 3822 2685 993 1061 from projected window.<br>
Start reading data/LE72040312010347EDC00_ROI_B1.vrt<br>
Using blocksize 128 x 128<br>
Creating output data/LE72040312010347EDC00_ROI_B1_TOARAD.tif<br>
Start reading data/LE72040312010347EDC00_ROI_B2.vrt<br>
Using blocksize 128 x 128<br>
Creating output data/LE72040312010347EDC00_ROI_B2_TOARAD.tif<br>
Start reading data/LE72040312010347EDC00_ROI_B3.vrt<br>
Using blocksize 128 x 128<br>
Creating output data/LE72040312010347EDC00_ROI_B3_TOARAD.tif<br>
Start reading data/LE72040312010347EDC00_ROI_B4.vrt<br>
Using blocksize 128 x 128<br>
Creating output data/LE72040312010347EDC00_ROI_B4_TOARAD.tif<br>
Start reading data/LE72040312010347EDC00_ROI_B5.vrt<br>
Using blocksize 128 x 128<br>
Creating output data/LE72040312010347EDC00_ROI_B5_TOARAD.tif<br>
Start reading data/LE72040312010347EDC00_ROI_B7.vrt<br>
Using blocksize 128 x 128<br>
Creating output data/LE72040312010347EDC00_ROI_B7_TOARAD.tif<br>
Theta_i=22.545988, Phi_i=160.273075<br>
Lambdas: [ 482.5 565. 660. 837.5 1650. 11450. 2220. ]<br>
LE72040312010347EDC00_MTL.txt<br>
Doy: 347, Year: 2010<br>
Using default O3 conc file, O3 conc: 265.000000<br>
Starting interpolation...<br>
Interpolation done...<br>
Creating output data/LE72040312010347EDC00_WANG_VIS_WLRAD.tif<br>
Sat Jun 15 15:23:22 2013<br>
TOTAL TIME IN MINUTES: 3.43263668219<br>
EXIT STATUS<br>
-1 if numpy and/or GDAL aren't present <br>
<br>AUTHORS<br>
J Gomez-Dans (j.gomez-dans@ucl.ac.uk)<br>
Alfonso Diz-Lois Palomares (dizlois@gmail.com)<br>
"""</span>
<br>
</div>
<div id="footer">
<span class="footertext" style="color: gray;"><em>Webmaster: </em></span>
<span class="footertext" style="color: white;">&nbsp; Alfonso Diz-Lois </span><br>
<a class="footertext" href="Formulario.html" style="text-decoration: none; position: absolute; text-align: left; left: 20px;"><em>Contact</em></a><br>
<!-- hitwebcounter Code START --> <a href="http://www.hitwebcounter.com/" target="_blank"><img src="http://hitwebcounter.com/counter/counter.php?page=5765267&amp;style=0010&amp;nbdigits=5&amp;type=page&amp;initCount=0" title="" alt="" border="0"></a><!-- hitwebcounter.com --><a href="http://www.hitwebcounter.com/" title="Know Total Hits" target="_blank" style="font-family: Arial,Helvetica,sans-serif; font-size: 11px; color: rgb(154, 150, 163); text-decoration: none;"><em>Visits</em>
</a></div>

</body></html>
